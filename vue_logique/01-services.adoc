= Vue logique – Architecture fonctionnelle

== Objectif

Cette section présente le découpage logique de l’application Beep en services ou modules fonctionnels. Elle permet de comprendre comment les responsabilités métier sont distribuées au sein du système, et d’identifier les composants principaux qui interagissent pour délivrer les fonctionnalités aux utilisateurs.

== Services fonctionnels

[cols="1,3,2", options="header"]
|===
| Service | Responsabilités | Dépendances critiques

| Authentification
| Gère l’inscription, la connexion, les sessions, les providers externes (Google, Polytech), les tokens d’accès.
| Utilisateurs

| Gestion des utilisateurs
| Gère les profils utilisateurs, les avatars, les préférences, la liste d’amis, les relations.
| Authentification

| Serveurs communautaires
| Gère la création de serveurs, la configuration des rôles, la gestion des membres, les invitations.
| Authentification, Utilisateurs

| Canaux et communication
| Gère les canaux (texte, vocal), les permissions par rôle, la hiérarchie des canaux.
| Serveurs, Rôles

| Messagerie
| Gère l’envoi, la réception, la modification et suppression des messages, ainsi que le partage de fichiers.
| Canaux, Utilisateurs, Notifications

| Notifications
| Gère les alertes push, les notifications in-app, les statuts.
| Messagerie, Gestion des utilisateurs

| Recherche
| Permet de rechercher des utilisateurs, des serveurs, des messages, ou des fichiers.
| Utilisateurs, Messagerie

| Supervision & modération
| Permet de signaler, masquer ou modérer des contenus, d’archiver ou supprimer des serveurs inactifs.
| Messagerie, Utilisateurs, Serveurs
|===

== Diagramme des composants (Vue simplifiée)

[mermaid]
----
graph TD
    subgraph Utilisateur
        U1[Application Web/Client]
    end

    subgraph Backend Beep
        A[Authentification]
        B[Utilisateurs]
        C[Serveurs]
        D[Canaux]
        E[Messages]
        F[Notifications]
        G[Recherche]
        H[Modération]
    end

    U1 --> A
    U1 --> B
    U1 --> C
    U1 --> D
    U1 --> E
    U1 --> F
    U1 --> G

    B --> H
    E --> H
----

== Évolutions envisagées

- Ajout d’un service de statistiques et d’analyse
- Intégration de bots pour automatisation communautaire
- Service de gestion de contenu multimédia avancé

== Interactions entre services

Les services présentés ci-dessus interagissent selon différents modes de communication, qui seront détaillés dans la section dédiée aux interactions techniques.

- Les interactions synchrones sont majoritairement réalisées via des APIs REST.
- Les flux asynchrones (notifications, modération, supervision) reposent sur un mécanisme de publication/consommation d’événements.
- Certaines données temporaires (sessions, présence) sont partagées via des caches distribués.

La cartographie détaillée des échanges inter-services est décrite dans <<03-interactions-techniques.adoc>>.

== Bilan de la vue logique

- **Maturité des services** :
  - Authentification, Gestion des utilisateurs, Messagerie : définis et stables
  - Notifications, Recherche : à préciser dans la vue technique
  - Supervision & modération : en cours de formalisation (flux à détailler)

- **Points à approfondir** :
  - Flux de modération (interactions H ↔︎ E / B)
  - Gestion de la recherche avancée (scalabilité, indexation)
  - Rôles et permissions multi-niveaux (serveur / canal)

- **Hypothèses technologiques à valider en vue technique** :
  - REST pour interactions synchrones
  - Pub/Sub pour événements (Kafka ? autre ?)
  - Cache distribué (Redis ?) pour sessions et présence
  - Sécurité inter-service : mTLS, Service Mesh ?
